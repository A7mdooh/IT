<!doctype html>
<html lang="ar" dir="rtl">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>ุงููุนุจุฉ ุงูุชุนููููุฉ: ุฑุญูุฉ ุนุจุฑ ุดุจูุงุช ุงูุชูุงุตู</title>
  <meta name="description" content="ูุบุงูุฑุฉ ุชุนููููุฉ ูุงุณุชูุดุงู ุงููุฏููุงุช ูุงูุดุจูุงุช ุงูุงุฌุชูุงุนูุฉ ูุงููููู ููุดุงุฑูุฉ ุงููุณุงุฆุทุ ูุน ููุงุชูุญ ุงูุฃูุงู.">
  <link href="https://fonts.googleapis.com/css2?family=Cairo:wght@400;700;800&display=swap" rel="stylesheet">
  <style>
    :root{
      --radius:16px; --primary:#0ea5e9; --accent:#f59e0b; --ok:#16a34a; --warn:#eab308; --err:#ef4444;
      --bg:#f8fafc; --panel:#ffffff; --text:#0f172a; --muted:#475569; --ring:rgba(14,165,233,.45);
      --shadow:0 12px 30px rgba(0,0,0,.08);
    }
    *{box-sizing:border-box} html{scroll-behavior:smooth}
    body{margin:0;font-family:"Cairo",system-ui,sans-serif;background:var(--bg);color:var(--text);line-height:1.7;font-size:clamp(16px,1.1vw+12px,19px)}
    a{color:inherit}
    .container{width:min(1100px,92%);margin:auto;padding:24px}
    .topbar{position:sticky;top:0;background:linear-gradient(90deg,rgba(14,165,233,.12),rgba(245,158,11,.12));backdrop-filter:blur(6px);border-bottom:1px solid rgba(2,8,23,.08);z-index:40}
    .nav a,.nav button{margin-inline:.35rem;text-decoration:none;color:var(--text)}
    .btn{border:0;border-radius:999px;padding:10px 16px;cursor:pointer;font-weight:800}
    .btn.primary{background:var(--primary);color:#fff}
    .btn.outline{background:transparent;border:1px solid var(--primary);color:var(--primary)}
    .btn.ghost{background:transparent;border:1px solid rgba(2,8,23,.12);color:var(--text)}
    .card{background:var(--panel);border:1px solid rgba(2,8,23,.08);border-radius:var(--radius);padding:18px;box-shadow:var(--shadow);margin-top:16px}
    .hero{border-radius:var(--radius);padding:28px;background:
      radial-gradient(1100px 380px at 100% -20%, rgba(14,165,233,.20), transparent 60%),
      radial-gradient(1000px 300px at -10% -30%, rgba(245,158,11,.20), transparent 60%),
      var(--panel); box-shadow:var(--shadow); border:1px solid rgba(2,8,23,.06)}
    .hero h1{margin:0 0 6px;font-size:clamp(28px,2.3vw+18px,44px);
      background:linear-gradient(90deg,var(--primary),var(--accent));-webkit-background-clip:text;background-clip:text;color:transparent}
    .lead{color:var(--muted)}
    .chips{display:flex;gap:8px;flex-wrap:wrap;margin-top:10px}
    .chip{padding:8px 12px;border-radius:999px;background:rgba(2,8,23,.06)}
    .grid{display:grid;gap:16px}
    @media(min-width:880px){.grid.two{grid-template-columns:1fr 1fr}.grid.three{grid-template-columns:repeat(3,1fr)}.grid.four{grid-template-columns:repeat(4,1fr)}}
    /* ุดุฑูุท ูุฑุงุญู + ููุงุชูุญ */
    .progress{display:grid;grid-template-columns:repeat(4,1fr);gap:10px;margin:16px 0}
    .stage{display:flex;align-items:center;gap:8px;padding:10px;border-radius:12px;border:1px dashed rgba(2,8,23,.18);background:#f1f5f9}
    .stage.done{border-style:solid;border-color:var(--primary);background:#e0f2fe}
    .key{font-size:1.1rem}
    .toast{position:fixed;inset-inline:16px;bottom:16px;background:#fff;color:var(--text);
      border-inline-start:6px solid var(--primary);padding:12px 14px;border-radius:12px;box-shadow:var(--shadow);opacity:0;transform:translateY(8px);transition:.25s;z-index:60}
    .toast.show{opacity:1;transform:none}
    /* DnD ุนุงู */
    .tokens{display:flex;flex-wrap:wrap;gap:8px}
    .token{display:inline-flex;align-items:center;gap:8px;margin:6px;padding:10px 14px;border-radius:999px;background:#fff;border:1px solid rgba(2,8,23,.14);cursor:grab;user-select:none}
    .token small{opacity:.7}
    .buckets{display:grid;gap:12px;grid-template-columns:repeat(auto-fit,minmax(220px,1fr))}
    .bucket{min-height:130px;padding:10px;border-radius:12px;border:2px dashed rgba(2,8,23,.18);background:#f8fafc}
    .bucket h4{margin:0 0 6px}
    .result{margin-top:8px;font-weight:800}
    .shake{animation:shake .3s linear} @keyframes shake{0%,100%{transform:translateX(0)}25%{transform:translateX(-3px)}75%{transform:translateX(3px)}}
    /* ุดุฑูุท ุงูููุช ุงูููุงุฆู */
    .bar{height:8px;background:#e2e8f0;border-radius:999px;overflow:hidden}
    .bar>div{height:100%;width:0;background:linear-gradient(90deg,var(--primary),var(--accent))}
    /* ููุญุฉ ุงููุดุงุฑูุน */
    .board{display:grid;gap:12px;grid-template-columns:repeat(auto-fit,minmax(260px,1fr))}
    .badge{display:inline-block;padding:4px 10px;border-radius:999px;font-size:.85em;background:rgba(2,8,23,.06)}
  </style>
</head>
<body>
  <!-- ุดุฑูุท ุนููู -->
  <header class="topbar">
    <div class="container" style="display:flex;justify-content:space-between;align-items:center">
      <a class="brand" href="../" style="font-weight:800;text-decoration:none;color:var(--text)">ููุตุชู</a>
      <nav class="nav">
        <a href="../lessons/lesson1.html">ุงูุฏุฑุณ ุงูุฃูู</a>
        <a href="../lessons/lesson1-plan.html">ุชุญุถูุฑ ุงูุฏุฑุณ</a>
        <a href="./">ุงูุฃูุนุงุจ</a>
        <button id="themeToggle" class="btn ghost">๐</button>
      </nav>
    </div>
  </header>

  <main class="container">
    <!-- ุจุทู -->
    <section class="hero">
      <h1>ุงููุนุจุฉ ุงูุชุนููููุฉ: ุฑุญูุฉ ุนุจุฑ ุดุจูุงุช ุงูุชูุงุตู</h1>
      <p class="lead">ุงุฌูุน <strong>ููุงุชูุญ ุงูุฃูุงู</strong> ุจุงุฌุชูุงุฒ ุงูุนูุงูู ุงูุฃุฑุจุนุฉ: ุงูุชุนุงุฑูุ ุงูุงุณุชูุดุงูุ ุงููุฎุงุทุฑ ูุงูุฃูุงูุ ุงููุดุฑูุน ุงูุฎุชุงูู.</p>
      <div class="chips">
        <span class="chip">ุงููุฏููุงุช</span>
        <span class="chip">ุงูุดุจูุงุช ุงูุงุฌุชูุงุนูุฉ</span>
        <span class="chip">ูุดุงุฑูุฉ ุงููุณุงุฆุท</span>
        <span class="chip">ูููู/ูุญุฑุฑุงุช ุงูููุจ</span>
      </div>
      <div class="progress" aria-label="ุชูุฏู ุงููุฑุงุญู">
        <div class="stage" id="s1"><span class="key">๐</span> ุงูุชุนุงุฑู</div>
        <div class="stage" id="s2"><span class="key">๐</span> ุงูุงุณุชูุดุงู</div>
        <div class="stage" id="s3"><span class="key">๐</span> ุงููุฎุงุทุฑ ูุงูุฃูุงู</div>
        <div class="stage" id="s4"><span class="key">๐</span> ุงููุดุฑูุน</div>
      </div>
      <button class="btn primary" id="start">ุงุจุฏุฃ ุงููุบุงูุฑุฉ</button>
    </section>

    <!-- ุงููุฑุญูุฉ 1: ุงูุชุนุงุฑู (Intro Quiz) -->
    <section class="card" id="intro" hidden>
      <h2>ุงููุฑุญูุฉ 1: ุงูุชุนุงุฑู โ ุทุงุจู ุงูุดุนุงุฑ ูุน ุงููุฆุฉ</h2>
      <p class="lead">ุงุณุญุจ ุงูุจุทุงูุฉ ุฅูู ุงููุฆุฉ ุงูุตุญูุญุฉ: (ูุฏููุงุช / ุดุจูุงุช ุงุฌุชูุงุนูุฉ / ูููู/ูุญุฑุฑุงุช ุงูููุจ / ูุดุงุฑูุฉ ูุณุงุฆุท)</p>
      <div class="tokens" id="introTokens" aria-label="ุจุทุงูุงุช ุงูุดุนุงุฑุงุช">
        <!-- ุงุณุชุฎุฏููุง ุจุทุงูุงุช ูุตูุฉ ูุชุนูู ุฏูู ุตูุฑ โ ููููู ูุงุญููุง ุงุณุชุจุฏุงู ุงููุต ุจุตูุฑ ุดุนุงุฑุงุช -->
        <div class="token" draggable="true" data-type="ุดุจูุงุช ุงุฌุชูุงุนูุฉ">Facebook <small>(ุดุจูุงุช)</small></div>
        <div class="token" draggable="true" data-type="ุดุจูุงุช ุงุฌุชูุงุนูุฉ">Twitter <small>(ุดุจูุงุช)</small></div>
        <div class="token" draggable="true" data-type="ูุฏููุงุช">Blogger <small>(ูุฏููุงุช)</small></div>
        <div class="token" draggable="true" data-type="ูููู">Wikipedia <small>(ูููู)</small></div>
        <div class="token" draggable="true" data-type="ูุดุงุฑูุฉ ูุณุงุฆุท">YouTube <small>(ูุณุงุฆุท)</small></div>
      </div>
      <div class="buckets">
        <div class="bucket" data-accept="ูุฏููุงุช"><h4>ูุฏููุงุช</h4></div>
        <div class="bucket" data-accept="ุดุจูุงุช ุงุฌุชูุงุนูุฉ"><h4>ุดุจูุงุช ุงุฌุชูุงุนูุฉ</h4></div>
        <div class="bucket" data-accept="ูููู"><h4>ูููู/ูุญุฑุฑุงุช ุงูููุจ</h4></div>
        <div class="bucket" data-accept="ูุดุงุฑูุฉ ูุณุงุฆุท"><h4>ูุดุงุฑูุฉ ูุณุงุฆุท</h4></div>
      </div>
      <div class="result" id="introOut"></div>
      <div style="text-align:end;margin-top:8px">
        <button class="btn ghost" id="resetIntro">ุฅุนุงุฏุฉ</button>
        <button class="btn primary" id="next1" disabled>ุงูุชุงูู โ</button>
      </div>
    </section>

    <!-- ุงููุฑุญูุฉ 2: ุงูุงุณุชูุดุงู (Drag & Drop Challenge) -->
    <section class="card" id="explore" hidden>
      <h2>ุงููุฑุญูุฉ 2: ุงูุงุณุชูุดุงู โ ูุดุงุท โ ูุณููุฉ</h2>
      <p class="lead">ุงุณุญุจ ุงููุดุงุท ุฅูู ุงููุณููุฉ ุงูุฃูุณุจ: (YouTube / Blogger / Wikipedia)</p>
      <div class="tokens" id="expTokens">
        <div class="token" draggable="true" data-target="YouTube">ูุดุงุฑูุฉ ููุทุน ููุฏูู</div>
        <div class="token" draggable="true" data-target="Blogger">ูุชุงุจุฉ ููููุงุช ุดุฎุตูุฉ</div>
        <div class="token" draggable="true" data-target="Wikipedia">ุงูุชุนุงูู ูู ูุชุงุจุฉ ููุงู</div>
      </div>
      <div class="buckets">
        <div class="bucket" data-name="YouTube"><h4>YouTube</h4></div>
        <div class="bucket" data-name="Blogger"><h4>Blogger</h4></div>
        <div class="bucket" data-name="Wikipedia"><h4>Wikipedia</h4></div>
      </div>
      <div class="result" id="expOut"></div>
      <div style="text-align:end;margin-top:8px">
        <button class="btn ghost" id="resetExp">ุฅุนุงุฏุฉ</button>
        <button class="btn primary" id="next2" disabled>ุงูุชุงูู โ</button>
      </div>
    </section>

    <!-- ุงููุฑุญูุฉ 3: ุงููุฎุงุทุฑ ูุงูุฃูุงู (Decision Game) -->
    <section class="card" id="safety" hidden>
      <h2>ุงููุฑุญูุฉ 3: ุงููุฎุงุทุฑ ูุงูุฃูุงู โ ูุฑุงุฑ ุณุฑูุน</h2>
      <p class="lead">ุงุฎุชุฑ ุงูุชุตุฑู ุงูุตุญูุญ/ุงูุฎุงุทุฆ ููู ูููู. ุชุญุชุงุฌ 3/4 ููุงุท ููููุฒ ุจุงูููุชุงุญ.</p>
      <div class="grid two" id="safetyList">
        <div class="card" style="border-style:dashed">
          <p>ูุตูุชู ุฑุณุงูุฉ ุชุทูุจ ูุดุงุฑูุฉ ุจูุงูุงุชู ุงูุดุฎุตูุฉ.</p>
          <button class="btn outline" data-ok="false">ุฃุดุงุฑู ุงูุจูุงูุงุช</button>
          <button class="btn outline" data-ok="true">ุฃุฑูุถ ูุฃุจููุบ</button>
        </div>
        <div class="card" style="border-style:dashed">
          <p>ุชูููุช ุตูุฑุฉ ูุณูุฆุฉ ุนุจุฑ ุชุทุจูู.</p>
          <button class="btn outline" data-ok="true">ุฃุจููุบ ูุฃุญูุธ ุงูุฏููู</button>
          <button class="btn outline" data-ok="false">ุฃุนูุฏ ูุดุฑูุง</button>
        </div>
        <div class="card" style="border-style:dashed">
          <p>ุตุฏููู ุทูุจ ูููุฉ ูุฑูุฑู ููุฏุฎูู ุฅูู ุญุณุงุจู.</p>
          <button class="btn outline" data-ok="false">ุฃุนุทูู ูููุฉ ุงููุฑูุฑ</button>
          <button class="btn outline" data-ok="true">ุฃุฑูุถ ูุฃุดุฑุญ ุงููุฎุงุทุฑ</button>
        </div>
        <div class="card" style="border-style:dashed">
          <p>ุทูุจ ุตุฏุงูุฉ ูู ุดุฎุต ูุฌููู ุฏูู ูุนูููุงุช ูุงุถุญุฉ.</p>
          <button class="btn outline" data-ok="false">ุฃูุจู ููุฑูุง</button>
          <button class="btn outline" data-ok="true">ุฃุฑูุถ/ุฃุชุฃูุฏ ุฃูููุง</button>
        </div>
      </div>
      <div class="result" id="safeOut"></div>
      <div style="text-align:end;margin-top:8px">
        <button class="btn ghost" id="resetSafe">ุฅุนุงุฏุฉ</button>
        <button class="btn primary" id="next3" disabled>ุงูุชุงูู โ</button>
      </div>
    </section>

    <!-- ุงููุฑุญูุฉ 4: ุงููุดุฑูุน ุงูุฎุชุงูู (Mini-Project Game) -->
    <section class="card" id="project" hidden>
      <h2>ุงููุฑุญูุฉ 4: ุงููุดุฑูุน โ ูุฎุทุท ุงุณุชุฎุฏุงู ุฌูุงุนู</h2>
      <p class="lead">ุงุนูููุง ูู ูุฌููุนุงุช ุตุบูุฑุฉ ูุชุตููู ูุฎุทุท ุงุณุชุฎุฏุงู ูุณููุฉ ุชูุงุตู: ุงุณู ุงููุณููุฉ โ ุงููุฏู โ ููุงุฑุณุงุช ุฅูุฌุงุจูุฉ โ ููุงุฑุณุงุช ูุฌุจ ุชุฌูุจูุง.</p>
      <div class="grid two">
        <div>
          <label>ุงุณู ุงููุฌููุนุฉ</label>
          <input class="token" id="gName" placeholder="ูุฌููุนุฉ 1" style="width:100%">
          <label>ุงููุณููุฉ</label>
          <input class="token" id="gPlatform" placeholder="ูุซุงู: YouTube" style="width:100%">
          <label>ุงููุฏู ูู ุงูุงุณุชุฎุฏุงู</label>
          <input class="token" id="gGoal" placeholder="ูุซุงู: ุชุนูู ุงูุจุฑูุฌุฉ" style="width:100%">
        </div>
        <div>
          <label>ููุงุฑุณุงุช ุฅูุฌุงุจูุฉ</label>
          <textarea class="token" id="gDo" rows="4" placeholder="ุชุญูู ูู ุงููุตุงุฏุฑุ ุถุจุท ุงูููุช..." style="width:100%"></textarea>
          <label>ููุงุฑุณุงุช ูุฌุจ ุชุฌูุจูุง</label>
          <textarea class="token" id="gDont" rows="4" placeholder="ูุดุงุฑูุฉ ุจูุงูุงุช ุญุณุงุณุฉุ ุงูุชููุฑ..." style="width:100%"></textarea>
          <div style="text-align:end;margin-top:8px">
            <button class="btn primary" id="addCard">ูุดุฑ ูู ุงูุตู ุงูุงูุชุฑุงุถู</button>
          </div>
        </div>
      </div>
      <div class="result" id="projOut"></div>
      <h3 style="margin-top:12px">ุงูุตู ุงูุงูุชุฑุงุถู (Gamified Presentation)</h3>
      <div class="board" id="board"></div>
      <div style="text-align:end;margin-top:8px">
        <button class="btn outline" id="printBoard">ุทุจุงุนุฉ ุงูููุญุฉ</button>
        <button class="btn primary" id="finish" disabled>ุฅููุงุก ุงูุฑุญูุฉ ๐</button>
      </div>
    </section>

    <!-- ุชููุฆุฉ -->
    <section class="card" id="congrats" hidden>
      <h2>ูุจุฑูู! ุฌูุนุช ูู ููุงุชูุญ ุงูุฃูุงู ๐๐๐๐</h2>
      <p class="lead">ุงููุฎุฑุฌุงุช ุงูุชุนููููุฉ ุงูุชู ุญููุชูุง:</p>
      <ul>
        <li>ุชูููุฒ ุฃููุงุน ูุณุงุฆู ุงูุชูุงุตู ุงูุงุฌุชูุงุนู.</li>
        <li>ููู ุงุณุชุฎุฏุงูุงุชูุง ุงููุฎุชููุฉ.</li>
        <li>ุฅุฏุฑุงู ุงููุฎุงุทุฑ ูุฃูููุฉ ุงูุงุณุชุฎุฏุงู ุงูุขูู.</li>
        <li>ุชุนุฒูุฒ ุงูุชูููุฑ ุงููุงูุฏ ูุงูุนูู ุงูุฌูุงุนู.</li>
      </ul>
      <a class="btn primary" href="../lessons/lesson1.html">ุงูุนูุฏุฉ ููุฏุฑุณ</a>
    </section>
  </main>

  <div id="toast" class="toast" role="status" aria-live="polite"></div>

  <script>
    /* ========= ูุคุซุฑุงุช ูุฅุนุฏุงุฏ ุนุงู ========= */
    const $ = (s,p=document)=>p.querySelector(s), $$=(s,p=document)=>[...p.querySelectorAll(s)];
    const toast = $("#toast");
    function showToast(msg, ms=2000){ toast.innerHTML=msg; toast.classList.add("show"); clearTimeout(window.__t); window.__t=setTimeout(()=>toast.classList.remove("show"), ms); }
    // ุฃุตูุงุช ูุฌุงุญ/ุฎุทุฃ ุนุจุฑ WebAudio (ุจุฏูู ูููุงุช)
    let audioCtx=null; function initAudio(){ if(!audioCtx) audioCtx=new (window.AudioContext||window.webkitAudioContext)(); }
    function beep(freq=880, dur=0.12, type="sine", gain=0.04){
      if(!audioCtx) return;
      const o=audioCtx.createOscillator(), g=audioCtx.createGain();
      o.type=type; o.frequency.value=freq; g.gain.value=gain;
      o.connect(g).connect(audioCtx.destination);
      o.start(); o.stop(audioCtx.currentTime+dur);
    }
    function sfx(type){
      initAudio();
      if(type==="ok"){ [0,0.12,0.24].forEach((t,i)=>setTimeout(()=>beep(660+220*i,0.09,"sine",0.06), t*1000)); }
      if(type==="bad"){ [0,0.09].forEach((t,i)=>setTimeout(()=>beep(220-40*i,0.12,"square",0.06), t*1000)); }
    }

    // ุชุจุฏูู ุงูุซูู
    $("#themeToggle")?.addEventListener("click", ()=>{
      document.body.classList.toggle("dark");
      showToast(document.body.classList.contains("dark")?"ุชู ุชูุนูู ุงููุถุน ุงููููู ๐":"ุชู ุงูุชุญููู ูููุถุน ุงููุงุชุญ โ๏ธ");
    });

    // ุดุฑูุท ุงููุฑุงุญู
    const stages = [$("#s1"), $("#s2"), $("#s3"), $("#s4")];
    function unlock(i){ stages[i].classList.add("done"); stages[i].querySelector(".key").textContent="๐"; }

    // ุจุฏุก
    $("#start").addEventListener("click", ()=>{
      $("#intro").hidden=false; window.scrollTo({top: $("#intro").offsetTop-10, behavior:"smooth"});
      showToast("ููุง ูุจุฏุฃ ูุฑุญูุฉ ุงูุชุนุงุฑู!");
    });

    /* ========= ุงููุฑุญูุฉ 1: ุงูุชุนุงุฑู ========= */
    (function(){
      const tokens = $$("#introTokens .token");
      const buckets = $$(".bucket", $("#intro"));
      let placed=0, total=tokens.length;
      tokens.forEach(t=>{
        t.addEventListener("dragstart", e=>{
          initAudio();
          e.dataTransfer.setData("t", t.dataset.type+"|"+t.textContent);
        });
      });
      buckets.forEach(b=>{
        b.addEventListener("dragover", e=> e.preventDefault());
        b.addEventListener("drop", e=>{
          const data = e.dataTransfer.getData("t"); if(!data) return;
          const [type,label]=data.split("|");
          if(b.dataset.accept===type){
            const el = tokens.find(x=>x.textContent===label && x.draggable);
            if(!el) return;
            el.draggable=false; el.style.cursor="default"; el.style.opacity=.85;
            b.appendChild(el);
            placed++; sfx("ok"); showToast(`ุฃุญุณูุช! ${label} = ${type}`);
            if(placed===total){
              $("#introOut").textContent="ููุชุงุฒ! ุญุตูุช ุนูู ููุชุงุญ ุงูุฃูุงู ุงูุฃูู.";
              $("#next1").disabled=false; unlock(0);
            }
          }else{
            b.classList.add("shake"); setTimeout(()=>b.classList.remove("shake"), 300);
            sfx("bad"); showToast("ููุณุช ุงููุฆุฉ ุงูุตุญูุญุฉ โ");
          }
        });
      });
      $("#resetIntro").addEventListener("click", ()=> location.reload());
      $("#next1").addEventListener("click", ()=>{
        $("#explore").hidden=false; window.scrollTo({top: $("#explore").offsetTop-10, behavior:"smooth"});
      });
    })();

    /* ========= ุงููุฑุญูุฉ 2: ุงูุงุณุชูุดุงู ========= */
    (function(){
      const tokens = $$("#expTokens .token");
      const buckets = $$(".bucket", $("#explore"));
      let placed=0, total=tokens.length;
      tokens.forEach(t=> t.addEventListener("dragstart", e=> e.dataTransfer.setData("t", t.dataset.target+"|"+t.textContent)));
      buckets.forEach(b=>{
        b.addEventListener("dragover", e=> e.preventDefault());
        b.addEventListener("drop", e=>{
          const data=e.dataTransfer.getData("t"); if(!data) return;
          const [target,label]=data.split("|");
          if(b.dataset.name===target){
            const el = tokens.find(x=>x.textContent===label && x.draggable);
            if(!el) return;
            el.draggable=false; el.style.cursor="default"; el.style.opacity=.85;
            b.appendChild(el); placed++; sfx("ok"); showToast("ุตุญูุญ โ");
            if(placed===total){ $("#expOut").textContent="ุฑุงุฆุน! ููุชุงุญ ุงูุฃูุงู ุงูุซุงูู ุฃุตุจุญ ูู."; $("#next2").disabled=false; unlock(1); }
          }else{
            b.classList.add("shake"); setTimeout(()=>b.classList.remove("shake"), 300);
            sfx("bad"); showToast("ุงุฎุชูุงุฑ ุบูุฑ ุฏููู โ");
          }
        });
      });
      $("#resetExp").addEventListener("click", ()=> location.reload());
      $("#next2").addEventListener("click", ()=>{
        $("#safety").hidden=false; window.scrollTo({top: $("#safety").offsetTop-10, behavior:"smooth"});
      });
    })();

    /* ========= ุงููุฑุญูุฉ 3: ุงููุฎุงุทุฑ ูุงูุฃูุงู ========= */
    (function(){
      let score=0, answered=0;
      $("#safetyList").addEventListener("click", e=>{
        const btn = e.target.closest("button[data-ok]"); if(!btn) return;
        if(btn.disabled) return;
        answered++;
        const ok = btn.getAttribute("data-ok")==="true";
        if(ok){ score++; sfx("ok"); showToast("ุชุตุฑู ุตุญูุญ โ"); btn.classList.add("primary"); }
        else { sfx("bad"); showToast("ูุฐุง ุชุตุฑู ุฎุงุทุฆ โ"); btn.classList.add("shake"); }
        // ุชุนุทูู ุฒุฑู ุงูุจุทุงูุฉ
        btn.parentElement.querySelectorAll("button").forEach(b=> b.disabled=true);
        $("#safeOut").textContent = `ูุชูุฌุชู: ${score}/${answered}`;
        if(answered>=4){
          if(score>=3){ $("#safeOut").textContent += " โ ุฃุญุณูุช! ุญุตูุช ุนูู ููุชุงุญ ุงูุฃูุงู ุงูุซุงูุซ."; $("#next3").disabled=false; unlock(2); }
          else { $("#safeOut").textContent += " โ ุฃุนุฏ ุงููุญุงููุฉ ูุชุญุตู ุนูู ุงูููุชุงุญ."; }
        }
      });
      $("#resetSafe").addEventListener("click", ()=> location.reload());
      $("#next3").addEventListener("click", ()=>{
        $("#project").hidden=false; window.scrollTo({top: $("#project").offsetTop-10, behavior:"smooth"});
      });
    })();

    /* ========= ุงููุฑุญูุฉ 4: ุงููุดุฑูุน ========= */
    (function(){
      const board = $("#board");
      const hasCards = ()=> board.children.length>0;
      $("#addCard").addEventListener("click", ()=>{
        const name=$("#gName").value.trim(), plat=$("#gPlatform").value.trim(), goal=$("#gGoal").value.trim(), dox=$("#gDo").value.trim(), dont=$("#gDont").value.trim();
        if(!name||!plat||!goal||!dox||!dont){ showToast("ุฃููู ุฌููุน ุงูุญููู ุฃูููุง"); sfx("bad"); return; }
        const card=document.createElement("div");
        card.className="card";
        card.innerHTML=`
          <div class="badge">๐ฅ ${name}</div>
          <h3 style="margin:.4rem 0">ุงููุณููุฉ: ${plat}</h3>
          <p><strong>ุงููุฏู:</strong> ${goal}</p>
          <p><strong>ููุงุฑุณุงุช ุฅูุฌุงุจูุฉ:</strong><br>${dox.replace(/\n/g,"<br>")}</p>
          <p><strong>ููุงุฑุณุงุช ูุฌุจ ุชุฌูุจูุง:</strong><br>${dont.replace(/\n/g,"<br>")}</p>`;
        board.prepend(card);
        $("#projOut").textContent="ุชู ุงููุดุฑ ูู ุงูุตู ุงูุงูุชุฑุงุถู โ ููุชุงุฒ! ุญุตูุช ุนูู ููุชุงุญ ุงูุฃูุงู ุงูุฑุงุจุน.";
        $("#finish").disabled=false; sfx("ok"); unlock(3); showToast("ููุชุงุญ ุงูุฃูุงู ุงูุฑุงุจุน ๐");
        // ุญูุธ ูุญูู ุจุณูุท
        const saved = JSON.parse(localStorage.getItem("journey_board")||"[]");
        saved.unshift({name,plat,goal,dox,dont});
        localStorage.setItem("journey_board", JSON.stringify(saved));
      });

      // ุชุญููู ุงูููุญุฉ ูู ุงูุชุฎุฒูู ุงููุญูู
      (function loadBoard(){
        const saved = JSON.parse(localStorage.getItem("journey_board")||"[]");
        saved.forEach(({name,plat,goal,dox,dont})=>{
          const card=document.createElement("div");
          card.className="card";
          card.innerHTML=`
            <div class="badge">๐ฅ ${name}</div>
            <h3 style="margin:.4rem 0">ุงููุณููุฉ: ${plat}</h3>
            <p><strong>ุงููุฏู:</strong> ${goal}</p>
            <p><strong>ููุงุฑุณุงุช ุฅูุฌุงุจูุฉ:</strong><br>${dox.replace(/\n/g,"<br>")}</p>
            <p><strong>ููุงุฑุณุงุช ูุฌุจ ุชุฌูุจูุง:</strong><br>${dont.replace(/\n/g,"<br>")}</p>`;
          board.appendChild(card);
        });
        if(saved.length){ $("#finish").disabled=false; }
      })();

      $("#printBoard").addEventListener("click", ()=> window.print());
      $("#finish").addEventListener("click", ()=>{
        $("#congrats").hidden=false; window.scrollTo({top: $("#congrats").offsetTop-10, behavior:"smooth"});
        showToast("ุงูุชูุช ุงูุฑุญูุฉ โ ุฃุญุณูุชู ุฌููุนูุง! ๐");
      });
    })();
  </script>
</body>
</html>
