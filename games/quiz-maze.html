<!doctype html>
<html lang="ar" dir="rtl">
<head>
<meta charset="utf-8"/><meta name="viewport" content="width=device-width,initial-scale=1"/>
<title>ูุชุงูุฉ ุงูุฃุณุฆูุฉ</title>
<link href="https://fonts.googleapis.com/css2?family=Cairo:wght@400;700;800&display=swap" rel="stylesheet">
<link rel="stylesheet" href="../assets/css/style.css">
<link rel="stylesheet" href="../assets/css/games.css">
<style>
.bar{height:10px;background:#e2e8f0;border-radius:999px;overflow:hidden;margin-top:10px}
.bar>div{height:100%;width:0;background:linear-gradient(90deg,var(--primary),var(--accent))}
</style>
</head>
<body>
<header class="topbar">
  <div class="container" style="display:flex;justify-content:space-between;align-items:center">
    <a href="./" class="brand" style="text-decoration:none;color:inherit;font-weight:800">ุงูุฃูุนุงุจ</a>
    <nav class="nav">
      <a href="../lessons/lesson1.html">ุงูุฏุฑุณ ุงูุฃูู</a>
      <button id="themeToggle" class="btn ghost">๐</button>
    </nav>
  </div>
</header>

<main class="container">
  <section class="hero">
    <h1>๐ ูุชุงูุฉ ุงูุฃุณุฆูุฉ</h1>
    <p class="lead">ุฃุฌุจ ุจุฏูุฉ ูุชุชูุฏู ูู ุบุฑูุฉ ูุฃุฎุฑู. ููู ุฅุฌุงุจุฉ ุตุญูุญุฉ: <strong>+2</strong> ููุทุฉ.</p>
    <div class="bar"><div id="fill"></div></div>
  </section>

  <section class="card" id="room">
    <h2 id="title">ุงูุบุฑูุฉ 1</h2>
    <p id="q">ุฃู ูุฆุฉ ุชูุงุณุจ ููุตุฉ ยซููุฑุฏุจุฑูุณยปุ</p>
    <div id="answers" class="grid-2" style="display:grid;gap:12px;grid-template-columns:repeat(auto-fit,minmax(220px,1fr))"></div>
    <p class="lead" id="hint"></p>
    <div style="text-align:end;margin-top:8px">
      <button class="btn outline" id="retry" hidden>ุฅุนุงุฏุฉ ุงููุญุงููุฉ</button>
      <button class="btn primary" id="next" hidden>ุงูุชุงูู โ</button>
    </div>
  </section>

  <section class="card" id="end" hidden>
    <h2>๐ ูุจุฑูู! ุฎุฑุฌุช ูู ุงููุชุงูุฉ</h2>
    <p>ูุชูุฌุชู: <strong id="score"></strong> / <span id="total"></span></p>
    <a class="btn primary" href="./index.html">ุฑุฌูุน ุฅูู ููุฑุณ ุงูุฃูุนุงุจ</a>
  </section>
</main>

<script src="../assets/js/ui.js"></script>
<script src="../assets/js/game-core.js"></script>
<script>
insertPointsBadge();

const rooms = [
  {title:"ุงูุบุฑูุฉ 1", q:"ุฃู ูุฆุฉ ุชูุงุณุจ ููุตุฉ ยซููุฑุฏุจุฑูุณยปุ", choices:["ุงููุฏููุงุช","ุงูุดุจูุงุช ุงูุงุฌุชูุงุนูุฉ","ูุดุงุฑูุฉ ุงููุณุงุฆุท"], a:0, hint:"ููุฑุฏุจุฑูุณ ุชูุณุชุฎุฏู ููุดุฑ ุงูููุงูุงุช."},
  {title:"ุงูุบุฑูุฉ 2", q:"ยซุชุญุฑูุฑ ุชุนุงููู ูุน ุชูุซููยป ูุดูุฑ ุฅูู:", choices:["ูููู","ุงููุฏููุงุช","ุงูุดุจูุงุช ุงูุงุฌุชูุงุนูุฉ"], a:0, hint:"ูุซู ููููุจูุฏูุง."},
  {title:"ุงูุบุฑูุฉ 3", q:"ุฃูุถู ููุงุฑุณุฉ ููุฃูุงู:", choices:["ูุดุงุฑูุฉ ูููุฉ ุงูุณุฑ","ุชูุนูู ุงููุตุงุฏูุฉ ุงูุซูุงุฆูุฉ (2FA)","ูุดุฑ ุงููููุน ูุญุธููุง ุฏุงุฆููุง"], a:1, hint:"ุฃุถู ุทุจูุฉ ุชุญูู ูุญุณุงุจู."},
  {title:"ุงูุบุฑูุฉ 4", q:"ยซุงูุจุตูุฉ ุงูุฑูููุฉยป ุชุนูู:", choices:["ุฃุซุฑู ุงูุฏุงุฆู ุนูู ุงูุฅูุชุฑูุช","ุนุฏุฏ ุงููุชุงุจุนูู","ุณุฑุนุฉ ุงูุฅูุชุฑูุช"], a:0, hint:"ุชุนูููุงุชู ูุตูุฑู ุชุจูู ุฃุซุฑูุง."},
  {title:"ุงูุบุฑูุฉ 5", q:"ููุชููุจ ูุตููู ุถูู:", choices:["ูุดุงุฑูุฉ ุงููุณุงุฆุท","ุงููุฏููุงุช","ูููู"], a:0, hint:"ุฑูุน ููุฏูููุงุช ูุจุซ ูุจุงุดุฑ."}
];

let i=0, ok=0;
const fill=document.getElementById("fill");
const title=document.getElementById("title");
const q=document.getElementById("q");
const answers=document.getElementById("answers");
const hint=document.getElementById("hint");
const retry=document.getElementById("retry");
const next=document.getElementById("next");
const end=document.getElementById("end");
const room=document.getElementById("room");

function load(){
  const r=rooms[i];
  title.textContent=r.title; q.textContent=r.q; hint.textContent="";
  answers.innerHTML="";
  r.choices.forEach((c,idx)=>{
    const b=document.createElement("button");
    b.className="btn outline";
    b.textContent=c;
    b.onclick=()=> check(idx);
    answers.appendChild(b);
  });
  retry.hidden=true; next.hidden=true;
  fill.style.width = `${(i/rooms.length)*100}%`;
}
load();

function check(idx){
  const r=rooms[i];
  const btns=[...answers.children];
  btns.forEach(b=> b.disabled=true);
  if(idx===r.a){
    ok++; hint.textContent="ุตุญูุญ โ +2 ููุงุท";
    Points.add(2,false); SFX.ok(); next.hidden=false;
  }else{
    hint.textContent="ุฅุฌุงุจุฉ ุบูุฑ ุฏูููุฉ โ โ ุชูููุญ: "+r.hint;
    SFX.bad(); retry.hidden=false;
  }
}
retry.onclick=()=> load();
next.onclick=()=>{
  i++;
  if(i<rooms.length){ load(); }
  else{
    fill.style.width="100%";
    room.hidden=true; end.hidden=false;
    document.getElementById("score").textContent=ok;
    document.getElementById("total").textContent=rooms.length;
    Points.add(6); showToast("ุจููุณ ุฅุชูุงู ุงููุชุงูุฉ +6 ๐",2600);
  }
};
</script>
</body>
</html>
